#     Memcache原理分析篇

###   删除过期item

    Memcache为每个item设置过期时间，但不是到期就把item从内存删除，而是访问item时，如果到了有效期，才把item内存中删除。

    惰性删除：
        
        延迟删除到期的item到查找进行，可以提高memcache的效率。这样不必每时每刻检查到期的item，从而提高CPU的工作效率。
  
 ### LRU算法淘汰数据
 
    当Memcached使用内存大于设置的最大内存使用时，为了腾出内存空间来存放新的数据项，Memcached会启动LRU算法淘汰旧的数据项。
    
    淘汰规则是，从数据项列表尾部开始遍历，在列表中查找一个引用计数器为0的item，把此item释放掉。
  
    为什么要从item列表尾部开始遍历呢？ 因为memcached会把刚刚访问过的item放到item列表头部，所以尾部的item都是没有或很少访

    问的，这就是LRU算法的精髓。
    
    果在item列表找不到计数器为0的item，就查找一个3小时没有访问过的item。把他释放，如果还是找不到，就返回NULL（申请内存失败）。

    老数据被踢现象：

    某个key设置的是永久有效，也一样会被删除
 
 
    
    
    
   
